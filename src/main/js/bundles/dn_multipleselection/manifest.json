{
    "Bundle-SymbolicName": "dn_multipleselection",
    "Bundle-Version": "1.0.0-SNAPSHOT",
    "Bundle-Name": "${bundleName}",
    "Bundle-Description": "${bundleDescription}",
    "Bundle-Vendor": "con terra GmbH",
    "Product-Name": "devnet-mapapps-multiple-selection",
    "Require-Bundle": [
        {
            "name": "map",
            "version": "^3.3.0"
        },
        {
            "name": "agssearch",
            "version": "^3.3.0"
        },
        {
            "name": "resultcenter",
            "version": "^3.3.0"
        },
        {
            "name": "selection",
            "version": "^3.3.0"
        }
    ],
    "CSS-Themes-Extension": [
        {
            "name": "*",
            "files": [
                "./styles/styles.css"
            ]
        }
    ],
    "layout-widgets": [
        {
            "role": "resultOverviewWidget",
            "window": {
                "title": "${windowTitle}",
                "marginBox": {
                    "w": 300,
                    "h": 150
                },
                "dockTool": "resultOverviewTool",
                "closable": true,
                "minimizeOnClose": true,
                "resizable": true
            }
        },
        {
            "role": "multipleSelectionWidget",
            "window": {
                "title": "${windowTitle2}",
                "marginBox": {
                    "w": 300,
                    "h": 150
                },
                "dockTool": "multipleSelectionTool",
                "closable": true,
                "minimizeOnClose": true,
                "resizable": false
            }
        }
    ],
    "Components": [
        {
            "name": "ResultOverviewWidgetFactory",            
            "provides": [
                "dijit.Widget",
                "dn_resultoverview.ResultOverviewWidgetFactory"              
            ],
            "propertiesConstructor": true,
            "properties": {
                "widgetRole": "resultOverviewWidget"
            },
            "instanceFactory": true,
            "immediate": true,
            "references": [                
                {
                    "name": "_eventService",
                    "providing": "ct.framework.api.EventService"
                },
                {
                    "name": "_mapState",
                    "providing": "ct.mapping.map.MapState",
                    "policy": "static"
                },
                {
                    "name": "_tool",
                    "providing": "ct.tools.Tool",
                    "filter": "(id=resultOverviewTool)"
                },                
                {
                    "name": "_windowManager",
                    "providing": "ct.framework.api.WindowManager"
                }
            ]
        },
        {
            "name": "MultipleSelectionWidgetFactory",            
            "provides": [
                "dijit.Widget",
                "dn_resultoverview.MultipleSelectionWidgetFactory"              
            ],
            "propertiesConstructor": true,
            "properties": {
                "widgetRole": "multipleSelectionWidget"
            },
            "instanceFactory": true,          
            "references": [
                {
                    "name": "multipleSelectionStore",
                    "providing": "ct.api.Store",
                    "cardinality": "1..n",
                    "filter": "(useIn=selection)"
                },
                {
                    "name": "_eventService",
                    "providing": "ct.framework.api.EventService"
                },
                {
                    "name": "_drawController",
                    "providing": "ct.mapping.edit.DrawStateController"
                },
                {
                    "name": "_mapState",
                    "providing": "ct.mapping.map.MapState",
                    "policy": "static"
                },
                {
                    "name": "selectionAction",
                    "providing": "selection.SelectionAction"
                },               
                {
                    "name": "_tool",
                    "providing": "ct.tools.Tool",
                    "filter": "(id=multipleSelectionTool)"
                },                
                {
                    "name": "_windowManager",
                    "providing": "ct.framework.api.WindowManager"
                },
                {
                    "name": "resultOverviewWidget",
                    "providing": "dn_resultoverview.ResultOverviewWidgetFactory"
                }
            ]
        },
        {
            "name": "SelectionEventDetector",
            "provides": "ct.framework.api.EventHandler",            
            "propertiesConstructor": true,
            "properties": {
                "Event-Topics": ["ct/selection/SELECTION_END"]
            },
            "references": [                
                {
                    "name": "resultOverviewWidget",
                    "providing": "dn_resultoverview.ResultOverviewWidgetFactory"
                }              
            ]
        },
        {
            "name": "${toolName}",
            "impl": "ct/tools/Tool",
            "provides": [
                "ct.tools.Tool"
            ],
            "propertiesConstructor": true,
            "properties": {
                "id": "resultOverviewTool",
                "toolRole": "resultcenter",
                "title": "${toolName}",
                "tooltip": "${toolTooltip}",
                "togglable": true,
                "iconClass": "icon-add-symbol"
            }
        },
        {
            "name": "${toolName2}",
            "impl": "ct/tools/Tool",
            "provides": [
                "ct.tools.Tool"
            ],
            "propertiesConstructor": true,
            "properties": {
                "id": "multipleSelectionTool",
                "toolRole": "toolset",
                "title": "${toolName2}",
                "tooltip": "${toolTooltip2}",
                "togglable": true,
                "iconClass": "icon-add-symbol"
            }
        }        
    ]
}
